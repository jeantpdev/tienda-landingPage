---
import PaginaProducto from '@/components/PaginaProducto';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
    const response = await fetch('https://mongodb-productos.onrender.com/productos/');
    const data = await response.json();
    const productos = data.productos

    return productos.map((producto) => ({
        params: {
            _id: producto._id,
        },
        props: {
            producto: producto,
        },
    }));
}

const datos_productos = Astro.props['producto']

const {
    imagen_principal,
    imagenes_productos,
    categoria,
    nombre_producto,
    descripcion,
    precio,
    descuento,
    dimensiones,
    colores,
    material,
    _id,
} = datos_productos;

---

<Layout title="Detalles">

    <PaginaProducto
        imagen_principal={imagen_principal} ,
        imagenes_productos={imagenes_productos},
        categoria={categoria}
        nombre_producto={nombre_producto},
        descripcion={descripcion},
        precio={precio},
        descuento={descuento},
        dimensiones={dimensiones},
        colores={colores},
        material={material},
        _id={_id}
        client:load
    />

</Layout>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" data-astro-rerun></script>