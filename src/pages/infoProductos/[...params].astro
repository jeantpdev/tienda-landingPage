---
export const prerender = false;

import PaginaProducto from '@/components/PaginaProducto';
import Layout from '../../layouts/Layout.astro';
/*
export async function getStaticPaths() {
    const response = await fetch('https://mongodb-productos.onrender.com/productos/');
    const data = await response.json();
    const productos = data.productos

    return productos.map((producto) => ({
        params: {
            _id: producto._id,
        },
        props: {
            producto: producto,
        },
    }));
}*/

// Obtener la cadena de parámetros de la URL
const parametrosCodificados = Astro.params.params;

// Decodificar la cadena JSON de los parámetros
const parametrosDecodificados = JSON.parse(decodeURIComponent(parametrosCodificados));

// Ahora puedes acceder a los parámetros como un objeto JavaScript
const { _id, 
    nombre_producto, 
    categoria,
    descripcion,
    precio,
    descuento,
    imagen_principal,
    imagenes_productos,
    dimensiones,
    material
} = parametrosDecodificados;

console.log("Parametros")
console.log(parametrosDecodificados)

---

<Layout title="Detalles">

    <PaginaProducto
        imagen_principal={imagen_principal} ,
        imagenes_productos={imagenes_productos},
        categoria={categoria}
        nombre_producto={nombre_producto},
        descripcion={descripcion},
        precio={precio},
        descuento={descuento},
        dimensiones={dimensiones},
        colores= "rojo",
        material={material},
        _id={_id}
        client:load
    />

</Layout>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11" data-astro-rerun></script>